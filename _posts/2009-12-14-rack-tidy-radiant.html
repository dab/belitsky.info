---
layout: post
title: Rack:Tidy with RadiantCMS
subtitle: Oprimising rendered html
teaser: Thanks for Sean Cribbs for this cool tip
thumb: thumb-rack-radiant.jpg
category: work
---

<p>While working on RadiantCMS based site, i start searching for tool, which will let me optimize html output, rendered by CMS.</p>
<p><a href="http://seancribbs.com/">Sean Cribbs</a> give me good advice on IRC &mdash; Rack Middleware &mdash; <a href="http://coderack.org/users/webficient/entries/38-racktidy">Rack::Tidy</a>.</p>

<h3>Installation</h3>
<p>You can follow installation steps from <a href="http://coderack.org/users/webficient/entries/38-racktidy">coderack entry page</a>.
</p>
<h3>Adding to RadiantCMS installation</h3>
<pre><code>TIDY_LIB = '/usr/lib/libtidy-0.99.so.0'                                                                                                                                                                         
require 'rack/tidy'   
</code></pre>

<p>I used only two non-default option:</p>
<pre><code>config.middleware.use Rack::Tidy,
  :ignore_paths => ['/admin'],
  :indent => false
</code></pre>
<h3>Problems</h3>
<p>I get problem with running this setup on my ubuntu vps, i get segmentation fault from tidybuffer.</p>
<p>Found simple patch on <a href="http://rubyforge.org/tracker/index.php?func=detail&aid=10007&group_id=435&atid=1744">rubyforge</a>.</p>
<h3>Do you know other simple and useful Rack middleware solutions?</h3>
<p>Let me know if so.</p>
